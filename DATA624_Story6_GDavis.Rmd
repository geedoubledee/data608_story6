---
title: "DATA608 - Story 6"
author: "Glen Dale Davis"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r packages, warning = FALSE, message = FALSE}
library(tidyverse)

```

```{r data}
food_sec_var_names <- c("Summary Food Security Status",
                        "Detailed Food Security Status",
                        "Food Security Raw Score",
                        "Food Security Rasch Scale Score",
                        "Children's Food Security Status",
                        "Children's Food Security Raw Score",
                        "Children's Food Security Rasch Scale Score",
                        "Adult Food Security Status",
                        "Adult Food Security Raw Score",
                        "Adult Food Security Rasch Scale")
food_sec_var_codes_12mon <- c("HRFS12M1", "HRFS12MD", "HRFS12M3", "HRFS12M4",
                              "HRFS12MC", "HRFS12M6", "HRFS12M7", "HRFS12M8",
                              "HRFS12M9", "HRFS12ME")
food_sec_var_codes_30d <- c("HRFS30D1", "HRFS30D2", "HRFS30D3", "HRFS30D4",
                            "HRFS30D5", "HRFS30D6", "HRFS30D7", "HRFS30D8",
                            "HRFS30D9", "HRFS30DE")
personal_var_names <- c("Recode for HEFAMINC", "FAMILY INCOME", "SEX",
                        "PERSONS AGE", "HOUSEHOLD TYPE", "HOUSEHOLD MEMBERS",
                        "HOUSEHOLD IDENTIFIER", "LIVING QUARTERS",
                        "TYPE OF HOUSING UNIT",
                        "HIGHEST LEVEL OF SCHOOL COMPLETED OR DEGREE RECEIVED",
                        "RACE")
personal_var_codes <- c("HRPOOR", "HEFAMINC", "PESEX", "PRTAGE", "HRHTYPE",
                        "HRNUMHOU", "HRHHID", "HETENURE", "HEHOUSUT",
                        "PEEDUCA", "PTDTRACE")
geographic_var_names <- c("REGION", "DIVISION", "FIPS STATE CODE")
geographic_var_codes <- c("GEREG", "GEDIV", "GESTFIPS")
all_var_codes <- c(food_sec_var_codes_12mon, food_sec_var_codes_30d,
                   personal_var_codes, geographic_var_codes)
base_url <- "https://raw.githubusercontent.com/geedoubledee/data608_story6/main/data/dec22pub_"

fnames <- c("pt_1.csv", "pt_2.csv", "pt_3.csv", "pt_4.csv", "pt_5.csv",
            "pt_6.csv", "pt_7.csv", "pt_8.csv", "pt_9.csv")
food_insecurity_df <- as.data.frame(matrix(nrow = 0,
                                           ncol = length(all_var_codes)))
colnames(food_insecurity_df) <- all_var_codes
df_list <- as.list(rep(0, length(fnames)))
for (i in 1:length(fnames)){
    df_part <- read.csv(paste0(base_url, fnames[i]))
    df_part <- df_part |>
        select(all_of(all_var_codes))
    df_list[[i]] <- df_part
}
food_insecurity_df <- food_insecurity_df |>
    bind_rows(df_list)

```
